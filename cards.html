<!DOCTYPE html>
<html>
<head>
  <title>Gauge Chart with Real-time Data from Firebase</title>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div>
    <div class="container">
      <canvas id="gaugeChart" width="50" height="50"></canvas>
    </div>
  </div>

  <script>
    // Initialize Firebase
    var firebaseConfig = {
      apiKey: "AIzaSyBnkCUlVyOtaz369WUwMbXQK700HMCtw7U",
          authDomain: "moisture-c02cc.firebaseapp.com",
          databaseURL: "https://moisture-c02cc-default-rtdb.firebaseio.com",
          projectId: "moisture-c02cc",
          storageBucket: "moisture-c02cc.appspot.com",
          messagingSenderId: "221486445241",
          appId: "1:221486445241:web:3183330ac6e38bb2b9a168",
    };
    firebase.initializeApp(firebaseConfig);

    // Get a reference to the database
    var database = firebase.database().ref().child('DHT/temperature');

    // Create the Gauge Chart using Chart.js
    var ctx = document.getElementById('gaugeChart').getContext('2d');
    var gaugeChart = new Chart(ctx, {
      type: 'pie',
      data: {
        datasets: [{
          data: [0, 100],
          backgroundColor: ['rgba(255, 99, 132, 0.2)', 'rgba(54, 162, 235, 0.2)'],
          borderColor: ['rgba(255, 99, 132, 1)', 'rgba(54, 162, 235, 1)'],
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        cutoutPercentage: 80,
        rotation: -Math.PI,
        circumference: Math.PI,
        tooltips: {
          enabled: false
        }
      }
    });

    // Monitor data changes in Firebase
    database.on('value', function(snapshot) {
      var value = snapshot.val();
      var data = gaugeChart.data.datasets[0].data;
      data[0] = value;
      data[1] = 100 - value;
      gaugeChart.update();
    });
  </script>
</body>
</html>
